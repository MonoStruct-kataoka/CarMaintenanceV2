# 交換部品の写真機能 - 動作確認チェックリスト

## ✅ 機能確認

### 1. カメラボタンの表示
- [ ] 「追加項目」タブを開く
- [ ] 「主な交換部品等」セクションが表示される
- [ ] 各部品の右側にカメラアイコン（📷）が表示される
- [ ] 以下の標準部品すべてにカメラボタンがある：
  - [ ] エンジン・オイル
  - [ ] オイル・フィルタ
  - [ ] LLC（ロング・ライフ・クーラント）
  - [ ] ブレーキ・フルード
  - [ ] エア・フィルタ
  - [ ] スパーク・プラグ
  - [ ] ワイパー・ブレード
  - [ ] バッテリ

### 2. 写真撮影機能
- [ ] カメラボタンをクリックするとモーダルが開く
- [ ] モーダルのタイトルに部品名が表示される（例：「写真管理 - エンジン・オイル」）
- [ ] 「写真を撮影 / アップロード」ボタンが表示される
- [ ] ボタンをクリックするとファイル選択ダイアログが開く
- [ ] 写真を選択すると画像が追加される
- [ ] 複数枚の写真を追加できる

### 3. Before/After機能
- [ ] 各写真の下に「前/後に変更」ボタンが表示される
- [ ] ボタンをクリックすると区分が切り替わる
- [ ] 「前」の写真には青いバッジ（前）が表示される
- [ ] 「後」の写真には緑のバッジ（後）が表示される

### 4. 写真の削除
- [ ] 各写真の右上に×ボタンが表示される
- [ ] ×ボタンをクリックすると写真が削除される
- [ ] トースト通知「🗑️ 写真を削除しました」が表示される

### 5. カメラボタンのバッジ
- [ ] 写真を追加すると、カメラボタンに緑色の丸いバッジが表示される
- [ ] バッジは写真がある部品のみに表示される
- [ ] 写真をすべて削除するとバッジも消える

### 6. カスタム部品の写真機能
- [ ] 「部品を追加」ボタンで新しい部品を追加
- [ ] 追加した部品にもカメラボタンが表示される
- [ ] カスタム部品でも同様に写真撮影できる
- [ ] カスタム部品を削除しても写真は残る（仕様）

---

## 💾 データ保存の確認

### 7. 下書き保存
- [ ] 交換部品に写真を追加
- [ ] 「下書き保存」ボタンをクリック
- [ ] トースト通知「✅ 下書きを保存しました」が表示される
- [ ] ページをリロードしても写真が残っている

### 8. 完了保存
- [ ] 必須項目を入力
- [ ] 交換部品に写真を追加
- [ ] 「完了」ボタンをクリック
- [ ] トースト通知「✅ 整備記録を完了しました」が表示される

### 9. データの読み込み
- [ ] 検索画面から既存のレコードを開く
- [ ] 「追加項目」タブを開く
- [ ] 保存した交換部品の写真が表示される
- [ ] カメラボタンにバッジが表示される

---

## 🔍 表示の確認

### 10. 詳細表示画面（view.html）
- [ ] 検索画面からレコードをクリック
- [ ] 詳細表示画面が開く
- [ ] 「点検写真」セクションに交換部品の写真が表示される
- [ ] 部品名ごとにグループ化されている
- [ ] 写真をクリックすると拡大表示（ライトボックス）

### 11. 顧客ページ（customer.html）
- [ ] QRコードまたはURLで顧客ページを開く
- [ ] 交換部品の写真が表示される
- [ ] Before/Afterのバッジが表示される
- [ ] 写真をクリックすると拡大表示

### 12. PDF出力（pdf-output.html）
- [ ] PDF出力ページを開く
- [ ] 交換部品の写真が選択肢に含まれている
- [ ] 写真を含めてPDF出力できる

---

## 🔄 複数レコードでの確認

### 13. レコード間の独立性
- [ ] レコードAを作成し、エンジン・オイルの写真を追加
- [ ] レコードBを新規作成
- [ ] レコードBのエンジン・オイルには写真がない（空）
- [ ] レコードBにブレーキ・フルードの写真を追加
- [ ] レコードAを開き直す
- [ ] レコードAにはエンジン・オイルの写真のみが表示される
- [ ] レコードBのブレーキ・フルードの写真は表示されない

### 14. 同じ部品の複数レコード
- [ ] レコードAでエンジン・オイルの写真3枚を追加
- [ ] レコードBでエンジン・オイルの写真2枚を追加
- [ ] レコードAを開く → 3枚の写真が表示される
- [ ] レコードBを開く → 2枚の写真が表示される
- [ ] 写真が混在していない

---

## 📱 レスポンシブの確認

### 15. スマートフォン表示
- [ ] スマホでページを開く
- [ ] カメラボタンがタップしやすいサイズ
- [ ] モーダルが全画面で表示される
- [ ] 写真撮影がスムーズ

### 16. タブレット表示
- [ ] タブレットでページを開く
- [ ] レイアウトが適切に表示される
- [ ] カメラボタンが見やすい

---

## 🐛 エラー処理の確認

### 17. エラーハンドリング
- [ ] 大きすぎる写真を追加してもエラーが出ない
- [ ] 無効なファイル形式を選択するとエラーメッセージが表示される
- [ ] ネットワークエラー時でもLocalStorageにフォールバック

---

## 📊 結果

### チェック済み項目数
- 合格: ____ / 17
- 不合格: ____

### 備考
```
記入欄：






```

---

## 🎯 合格基準

- **必須項目（1-14）**: すべて合格必須
- **推奨項目（15-17）**: 80%以上合格推奨

---

**チェック実施日**: ____年____月____日  
**チェック実施者**: ____________________  
**バージョン**: 1.0.0
